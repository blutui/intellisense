{
  "fileTypes": ["canvas"],
  "name": "Canvas",
  "scopeName": "source.canvas",
  "patterns": [
    {
      "include": "#block_comments"
    },
    {
      "include": "#comments"
    },
    {
      "include": "#html_tags"
    },
    {
      "include": "text.html.basic"
    }
  ],
  "repository": {
    "html_tags": {
      "patterns": [
        {
          "begin": "(<)([a-zA-Z0-9:-]+)(?=[^>]*></\\2>)",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.tag.html"
            },
            "2": {
              "name": "entity.name.tag.html"
            }
          },
          "end": "(>(<)/)(\\2)(>)",
          "endCaptures": {
            "1": {
              "name": "punctuation.definition.tag.html"
            },
            "2": {
              "name": "meta.scope.between-tag-pair.html"
            },
            "3": {
              "name": "entity.name.tag.html"
            },
            "4": {
              "name": "punctuation.definition.tag.html"
            }
          },
          "name": "meta.tag.any.html",
          "patterns": [
            {
              "include": "#tag-stuff"
            }
          ]
        },
        {
          "begin": "(<\\?)(xml)",
          "captures": {
            "1": {
              "name": "punctuation.definition.tag.html"
            },
            "2": {
              "name": "entity.name.tag.xml.html"
            }
          },
          "end": "(\\?>)",
          "name": "meta.tag.preprocessor.xml.html",
          "patterns": [
            {
              "include": "#tag_generic_attribute"
            },
            {
              "include": "#string"
            }
          ]
        },
        {
          "begin": "<!--",
          "captures": {
            "0": {
              "name": "punctuation.definition.comment.html"
            }
          },
          "end": "--\\s*>",
          "name": "comment.block.html",
          "patterns": [
            {
              "match": "--",
              "name": "invalid.illegal.bad-comments-or-CDATA.html"
            },
            {
              "include": "#embedded-code"
            }
          ]
        },
        {
          "begin": "<!",
          "captures": {
            "0": {
              "name": "punctuation.definition.tag.html"
            }
          },
          "end": ">",
          "name": "meta.tag.sgml.html",
          "patterns": [
            {
              "begin": "(DOCTYPE|doctype)",
              "captures": {
                "1": {
                  "name": "entity.name.tag.doctype.html"
                }
              },
              "end": "(?=>)",
              "name": "meta.tag.sgml.doctype.html",
              "patterns": [
                {
                  "match": "\"[^\">]*\"",
                  "name": "string.quoted.double.doctype.identifiers-and-DTDs.html"
                }
              ]
            },
            {
              "begin": "\\[CDATA\\[",
              "end": "]](?=>)",
              "name": "constant.other.inline-data.html"
            },
            {
              "match": "(\\s*)(?!--|>)\\S(\\s*)",
              "name": "invalid.illegal.bad-comments-or-CDATA.html"
            }
          ]
        },
        {
          "begin": "(?:^\\s+)?(<)((?i:style))\\b(?![^>]*/>)",
          "captures": {
            "1": {
              "name": "punctuation.definition.tag.html"
            },
            "2": {
              "name": "entity.name.tag.style.html"
            },
            "3": {
              "name": "punctuation.definition.tag.html"
            }
          },
          "end": "(</)((?i:style))(>)(?:\\s*\\n)?",
          "name": "source.css.embedded.html",
          "patterns": [
            {
              "include": "#tag-stuff"
            },
            {
              "begin": "(>)",
              "beginCaptures": {
                "1": {
                  "name": "punctuation.definition.tag.html"
                }
              },
              "end": "(?=</(?i:style))",
              "patterns": [
                {
                  "include": "source.css"
                }
              ]
            }
          ]
        },
        {
          "begin": "(?:^\\s+)?(<)((?i:script))\\b(?![^>]*/>)",
          "beginCaptures": {
            "1": {
              "name": "punctuation.definition.tag.html"
            },
            "2": {
              "name": "entity.name.tag.script.html"
            }
          },
          "end": "(?<=</(script|SCRIPT))(>)(?:\\s*\\n)?",
          "endCaptures": {
            "2": {
              "name": "punctuation.definition.tag.html"
            }
          },
          "name": "source.js.embedded.html",
          "patterns": [
            {
              "include": "#tag-stuff"
            },
            {
              "begin": "(?<!</(?:script|SCRIPT))(>)",
              "captures": {
                "1": {
                  "name": "punctuation.definition.tag.html"
                },
                "2": {
                  "name": "entity.name.tag.script.html"
                }
              },
              "end": "(</)((?i:script))",
              "patterns": [
                {
                  "captures": {
                    "1": {
                      "name": "punctuation.definition.comment.js"
                    }
                  },
                  "match": "(//).*?((?=</script)|$\\n?)",
                  "name": "comment.line.double-slash.js"
                },
                {
                  "begin": "/\\*",
                  "captures": {
                    "0": {
                      "name": "punctuation.definition.comment.js"
                    }
                  },
                  "end": "\\*/|(?=</script)",
                  "name": "comment.block.js"
                },
                {
                  "include": "source.js"
                }
              ]
            }
          ]
        },
        {
          "begin": "(</?)((?i:body|head|html)\\b)",
          "captures": {
            "1": {
              "name": "punctuation.definition.tag.html"
            },
            "2": {
              "name": "entity.name.tag.structure.any.html"
            }
          },
          "end": "(>)",
          "name": "meta.tag.structure.any.html",
          "patterns": [
            {
              "include": "#tag-stuff"
            }
          ]
        }
      ]
    },
    "comments": {
      "patterns": [
        {
          "patterns": [
            {
              "include": "#comments"
            }
          ],
          "begin": "\\{#",
          "end": "\\#}",
          "name": "comment.block.canvas"
        }
      ]
    }
  }
}
